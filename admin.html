<!DOCTYPE html>
<html>

<head>

<title>ADMIN PANEL</title>

<meta name="viewport" content="width=device-width">

<style>

body{
font-family:Arial;
margin:0;
background:#f0f2f5;
}


/* HEADER */

.header{

background:#003366;
color:white;
padding:15px;
font-size:22px;
text-align:center;
position:relative;

}


/* DP ICON */

.dp{

position:absolute;
right:20px;
top:10px;
width:45px;
height:45px;
border-radius:50%;
cursor:pointer;
}


/* DP MENU */

.menu{

position:absolute;
right:20px;
top:65px;
background:white;
box-shadow:0px 0px 10px gray;
border-radius:8px;
display:none;
width:180px;
z-index:1000;

}

.menu div{

padding:10px;
cursor:pointer;

}

.menu div:hover{

background:#eee;

}


/* CREATE BOX */

.box{

background:white;
width:350px;
margin:25px auto;
padding:20px;
border-radius:12px;
box-shadow:0px 0px 15px #bbb;
text-align:center;

}


input{

width:90%;
padding:10px;
margin:7px;
border-radius:5px;
border:1px solid gray;

}


button{

padding:10px 20px;
background:#003366;
color:white;
border:none;
border-radius:5px;
cursor:pointer;

}


/* TABLE */

table{

width:90%;
margin:auto;
background:white;
border-radius:10px;
overflow:hidden;
box-shadow:0px 0px 10px gray;

}

th{

background:#003366;
color:white;
padding:10px;

}

td{

padding:10px;
border-bottom:1px solid #ddd;

}


.green{

background:green;
color:white;
padding:5px 10px;
border-radius:6px;

}

.red{

background:red;
color:white;
padding:5px 10px;
border-radius:6px;

}


</style>

</head>

<body>



<div class="header">

PRINT PORTAL ADMIN

<img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png"
class="dp"
onclick="showMenu()">

</div>


<div class="menu" id="menu">

<div onclick="changePass()">
Change Password
</div>

<div onclick="logout()">
Logout
</div>

</div>



<div class="box">

<h3>Create Seller</h3>

<input id="user" placeholder="Username">

<input id="pass" placeholder="Password">

<input id="exp" type="date">

<br>

<button onclick="createSeller()">

Create Seller

</button>

</div>



<br>


<table id="tbl">

<tr>

<th>User</th>
<th>Password</th>
<th>Expiry</th>
<th>Status</th>
<th>Delete</th>

</tr>

</table>



<script type="module">

import { initializeApp }
from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";

import {
getFirestore,
collection,
addDoc,
getDocs,
deleteDoc,
doc,
updateDoc
}
from "https://www.gstatic.com/firebasejs/12.9.0/firebase-firestore.js";



const firebaseConfig={

apiKey:"AIzaSyB6iuJiQANc5DIon2ulq8NAtj6SPWT--sY",

authDomain:"printportal-36ae0.firebaseapp.com",

projectId:"printportal-36ae0",

storageBucket:"printportal-36ae0.firebasestorage.app",

messagingSenderId:"453235885594",

appId:"1:453235885594:web:2bb8e5a2449ace9bbd33a3"

};


const app=initializeApp(firebaseConfig);

const db=getFirestore(app);



/* LOAD SELLERS */

load();


async function load(){

tbl.innerHTML=`

<tr>

<th>User</th>
<th>Password</th>
<th>Expiry</th>
<th>Status</th>
<th>Delete</th>

</tr>

`;

const querySnapshot=await getDocs(collection(db,"seller"));

querySnapshot.forEach((docu)=>{

let s=docu.data();

let row=tbl.insertRow();

row.insertCell(0).innerHTML=s.user;

row.insertCell(1).innerHTML=s.pass;

row.insertCell(2).innerHTML=s.expiry;



let st=row.insertCell(3);

if(s.active){

st.innerHTML="<span class='green'>Active</span>";

}else{

st.innerHTML="<span class='red'>Off</span>";

}



row.insertCell(4).innerHTML=

"<button onclick='del(\""+docu.id+"\")'>Delete</button>";

});

}



/* CREATE SELLER */

window.createSeller=async function(){

let u=document.getElementById("user").value;

let p=document.getElementById("pass").value;

let e=document.getElementById("exp").value;


if(u=="" || p=="" || e==""){

alert("Fill All Fields");

return;

}


await addDoc(collection(db,"seller"),{

user:u,
pass:p,
expiry:e,
active:true,
pdf:0

});


alert("Seller Created");

load();

}



/* DELETE */

window.del=async function(id){

await deleteDoc(doc(db,"seller",id));

load();

}



</script>



<script>

/* MENU */

function showMenu(){

let m=document.getElementById("menu");

if(m.style.display=="block")

m.style.display="none";

else

m.style.display="block";

}



/* LOGOUT */

function logout(){

localStorage.clear();

location="index.html";

}


/* CHANGE ADMIN PASSWORD */

function changePass(){

let p=prompt("New Password");

if(p){

localStorage.adminPass=p;

alert("Password Changed");

}

}

</script>



</body>

</html>
