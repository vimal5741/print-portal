<!DOCTYPE html>
<html>
<head>

<title>PRINT PORTAL</title>

<meta name="viewport" content="width=device-width">

<style>

body{
margin:0;
font-family:Arial;
background:linear-gradient(180deg,#0a1f44,#031024);
color:white;
text-align:center;
}

/* BOX */

.box{

width:340px;
margin:60px auto;
padding:25px;
border-radius:20px;

background:rgba(255,255,255,0.05);

backdrop-filter:blur(10px);

box-shadow:0px 0px 30px rgba(0,0,0,0.5);

}

/* TITLE */

h1{

margin-top:10px;

font-size:32px;

color:#40d0ff;

}

.small{

color:#ccc;

margin-bottom:20px;

}

/* INPUT */

input{

width:90%;

padding:12px;

margin:8px;

border-radius:10px;

border:none;

font-size:16px;

}

/* PASSWORD */

.passBox{

position:relative;

}

.eye{

position:absolute;

right:25px;

top:18px;

cursor:pointer;

color:black;

}

/* ROLE */

.role{

display:flex;

justify-content:space-around;

margin:10px 0;

}

.role button{

padding:10px 20px;

border-radius:10px;

border:none;

background:#111;

color:white;

cursor:pointer;

}

.selected{

background:#007bff !important;

}

/* LOGIN BUTTON */

.loginBtn{

width:90%;

padding:14px;

border:none;

border-radius:12px;

background:linear-gradient(90deg,#00c6ff,#0072ff);

color:white;

font-size:18px;

cursor:pointer;

margin-top:10px;

}

/* LOADING BAR */

.loadBox{

width:90%;

height:6px;

background:#222;

margin:10px auto;

border-radius:10px;

overflow:hidden;

display:none;

}

.loadBar{

height:6px;

width:0%;

background:#00ff88;

transition:2s;

}

/* REGISTER */

.reg{

margin-top:15px;

color:#aaa;

cursor:pointer;

}

/* POPUP */

.popup{

position:fixed;

top:50%;

left:50%;

transform:translate(-50%,-50%);

background:#222;

padding:25px;

border-radius:15px;

display:none;

width:280px;

box-shadow:0px 0px 20px black;

}

.popup h2{

margin:10px;

}

.green{

color:#00ff88;

}

.red{

color:#ff4444;

}

.okBtn{

margin-top:10px;

padding:10px 20px;

border:none;

border-radius:10px;

cursor:pointer;

}

.okGreen{

background:#00cc66;

color:white;

}

.okRed{

background:#ff4444;

color:white;

}

</style>

</head>

<body>


<div class="box">

<h1>WELCOME</h1>

<div class="small">
Secure Print Portal
</div>


<input id="user" placeholder="Username">


<div class="passBox">

<input id="pass" type="password"
placeholder="Password">

<span class="eye"
onclick="togglePass()">
üëÅ
</span>

</div>


<div class="role">

<button id="sellerBtn"
onclick="setRole('Seller')">
Seller
</button>

<button id="adminBtn"
onclick="setRole('Admin')">
Admin
</button>

<button id="masterBtn"
onclick="setRole('Master')">
Master
</button>

</div>



<div class="loadBox"
id="loadBox">

<div class="loadBar"
id="loadBar"></div>

</div>



<button class="loginBtn"
onclick="login()">

LOGIN

</button>


<div class="reg"

onclick="location='registration.html'">

New Registration

</div>


</div>



<div class="popup"
id="popup">

<h2 id="popTitle"></h2>

<div id="popText"></div>

<button id="popBtn"
class="okBtn">

OK

</button>

</div>



<script type="module">


import { initializeApp }
from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";


import {

getFirestore,
collection,
getDocs,
doc,
getDoc

}

from "https://www.gstatic.com/firebasejs/12.9.0/firebase-firestore.js";



const firebaseConfig={

apiKey:"AIzaSyB6iuJiQANc5DIon2ulq8NAtj6SPWT--sY",

authDomain:"printportal-36ae0.firebaseapp.com",

projectId:"printportal-36ae0"

};


const app=initializeApp(firebaseConfig);

const db=getFirestore(app);


window.role="Seller";


window.setRole=function(r){

role=r;

sellerBtn.classList.remove("selected");

adminBtn.classList.remove("selected");

masterBtn.classList.remove("selected");


if(r=="Seller")
sellerBtn.classList.add("selected");

if(r=="Admin")
adminBtn.classList.add("selected");

if(r=="Master")
masterBtn.classList.add("selected");

}



setRole("Seller");



window.togglePass=function(){

pass.type=
pass.type=="password"?
"text":"password";

}



/* LOGIN */

window.login=async function(){

let u=user.value;

let p=pass.value;


if(u==""||p==""){

alert("Fill Details");

return;

}



/* START LOADING */

loadBox.style.display="block";

loadBar.style.width="0%";


setTimeout(()=>{

loadBar.style.width="100%";

},50);



setTimeout(async()=>{


/* MASTER */

if(role=="Master"){

showPopup(

"Coming Soon",

"Master Panel Coming Soon",

false

);

return;

}



/* ADMIN */

if(role=="Admin"){

const docRef=
doc(db,"admin","login");

const snap=
await getDoc(docRef);


let a=snap.data();


if(
a.user.trim()==u.trim()
&&
a.pass.trim()==p.trim()
){

showPopup(

"Success",

"Login Successfully",

true,

"admin.html"

);

return;

}else{

showPopup(

"Wrong Username Password",

"Login Failed",

false

);

return;

}

}



/* SELLER */

if(role=="Seller"){


let ok=false;

const snap=
await getDocs(collection(db,"seller"));


snap.forEach((d)=>{


let s=d.data();


if(

s.user.trim().toLowerCase()
==
u.trim().toLowerCase()

&&

s.pass.trim()==p.trim()

&&

s.active===true

){

ok=true;

localStorage.currentSeller=d.id;

localStorage.login="seller";

}

});


if(ok){

showPopup(

"Success",

"Login Successfully",

true,

"seller.html"

);

}else{

showPopup(

"Wrong Username Password",

"Login Failed",

false

);

}



}



},2000);



}

function showPopup(title,text,success,page){

popup.style.display="block";


popTitle.innerHTML=title;

popText.innerHTML=text;


if(success){

popTitle.className="green";

popBtn.className="okBtn okGreen";

}else{

popTitle.className="red";

popBtn.className="okBtn okRed";

}



popBtn.onclick=function(){


popup.style.display="none";

loadBox.style.display="none";

loadBar.style.width="0%";


if(success && page)

location=page;


}



}


</script>


</body>
</html>
