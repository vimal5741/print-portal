<!DOCTYPE html>
<html>

<head>

<title>PRINT PORTAL</title>

<meta name="viewport" content="width=device-width">

<style>

body{
font-family:Arial;
margin:0;
background:linear-gradient(#003366,#001122);
color:white;
text-align:center;
}

.header{
font-size:35px;
padding:20px;
}

#welcome{
margin-top:120px;
}

.enter{

padding:12px 30px;
font-size:18px;
background:#00cc99;
border:none;
border-radius:25px;
color:white;
cursor:pointer;

}

#login{

display:none;
background:white;
color:black;
width:330px;
margin:40px auto;
padding:20px;
border-radius:10px;

}

input,select{

width:90%;
padding:10px;
margin:6px;

}

button{

padding:10px 20px;
background:#003366;
color:white;
border:none;

}

</style>

</head>

<body>



<div class="header">

PRINT PORTAL

</div>



<div id="welcome">

<h2>Welcome to Digital Print System</h2>

<button class="enter"
onclick="startLogin()">

ENTER PORTAL

</button>

</div>



<div id="login">

<h3>LOGIN PANEL</h3>


<select id="type">

<option>Admin</option>
<option>Seller</option>

</select>



<input id="user"
placeholder="Username">

<input id="pass"
type="password"
placeholder="Password">

<br>

<button onclick="login()">

LOGIN

</button>

<div id="msg" style="color:red"></div>

</div>



<script type="module">

import { initializeApp }

from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";

import {

getFirestore,
collection,
getDocs,
doc,
getDoc

}

from "https://www.gstatic.com/firebasejs/12.9.0/firebase-firestore.js";



const firebaseConfig={

apiKey:"AIzaSyB6iuJiQANc5DIon2ulq8NAtj6SPWT--sY",

authDomain:"printportal-36ae0.firebaseapp.com",

projectId:"printportal-36ae0"

};



const app=initializeApp(firebaseConfig);

const db=getFirestore(app);



window.startLogin=function(){

welcome.style.display="none";
login.style.display="block";

}



/* LOGIN */

window.login=async function(){

let t=type.value;
let u=user.value;
let p=pass.value;



/* ADMIN LOGIN */

if(t=="Admin"){

const snap=await getDoc(doc(db,"admin","login"));

let a=snap.data();

if(u==a.user && p==a.pass){

localStorage.login="admin";

location="admin.html";

return;

}

}



/* SELLER LOGIN */

const s=await getDocs(collection(db,"seller"));

s.forEach((d)=>{

let x=d.data();

if(

x.user==u
&& x.pass==p
&& x.active

){

localStorage.login="seller";

localStorage.currentSeller=d.id;

location="seller.html";

}

});


msg.innerHTML="Wrong Login";

}



</script>

</body>

</html>
