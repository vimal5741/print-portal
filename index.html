<!DOCTYPE html>
<html>
<head>

<title>PRINT PORTAL</title>

<meta name="viewport" content="width=device-width">

<style>

body{
margin:0;
font-family:Arial;

background:linear-gradient(135deg,#0b2c50,#1b5c99,#3a8fd6);

height:100vh;

display:flex;
justify-content:center;
align-items:center;
}


/* CARD */

.box{

width:380px;

padding:30px;

border-radius:20px;

background:rgba(255,255,255,0.1);

box-shadow:0px 0px 30px black;

text-align:center;

color:white;

}


/* TITLE */

.title{
font-size:35px;
font-weight:bold;
}

.sub{
opacity:.8;
margin-bottom:20px;
}


/* INPUT */

input{

width:100%;

padding:12px;

margin:8px 0;

border-radius:10px;

border:none;

}


/* PASSWORD */

.passBox{
position:relative;
}

.eye{

position:absolute;
right:10px;
top:14px;
cursor:pointer;
color:black;

}


/* ROLE */

.role{
display:flex;
margin-top:10px;
}

.role button{

flex:1;

margin:3px;

padding:10px;

border:none;

border-radius:10px;

background:#003366;

color:white;

cursor:pointer;

}

.active{
background:#00ccff !important;
}


/* LOGIN */

.loginBtn{

width:100%;

padding:14px;

margin-top:10px;

border:none;

border-radius:12px;

background:linear-gradient(90deg,#00ccff,#0066ff);

color:white;

font-size:18px;

cursor:pointer;

}


/* LOADING */

.load{

width:100%;
height:6px;

background:#002244;

border-radius:10px;

margin-top:10px;

overflow:hidden;

display:none;

}

.bar{

height:6px;

width:0%;

background:#00ff66;

transition:2s linear;

}


/* REGISTER */

.register{

margin-top:15px;

padding:12px;

width:100%;

border:none;

border-radius:12px;

background:linear-gradient(90deg,#00cc66,#00994d);

color:white;

font-size:16px;

cursor:pointer;

}


/* POPUP */

.popup{

position:fixed;

top:50%;
left:50%;

transform:translate(-50%,-50%);

background:#001122;

padding:25px;

border-radius:20px;

display:none;

width:260px;

color:white;

text-align:center;

box-shadow:0px 0px 20px black;

}

.green{color:#00ff88;}
.red{color:red;}
.orange{color:orange;}

.okBtn{

margin-top:10px;

padding:10px 20px;

border:none;

border-radius:10px;

background:#007bff;

color:white;

cursor:pointer;

}

</style>

</head>

<body>


<div class="box">


<div class="title">

WELCOME

</div>

<div class="sub">

Secure Print Portal

</div>



<input id="user" placeholder="Username">


<div class="passBox">

<input id="pass"
type="password"
placeholder="Password">

<span class="eye"
onclick="eye()">
üëÅ
</span>

</div>



<div class="role">

<button id="sellerBtn"
onclick="setRole('seller')">
Seller
</button>

<button id="adminBtn"
onclick="setRole('admin')">
Admin
</button>

<button id="masterBtn"
onclick="setRole('master')">
Master
</button>

</div>



<button class="loginBtn"
onclick="startLogin()">
LOGIN
</button>



<div class="load"
id="load">

<div class="bar"
id="bar"></div>

</div>



<button class="register"

onclick="location='registration.html'">

New Registration

</button>


</div>



<div class="popup"
id="popup">

<div id="msg"></div>

<button class="okBtn"
onclick="closePop()">

OK

</button>

</div>



<script>

/* ROLE */

let role="seller";

function setRole(r){

role=r;

sellerBtn.classList.remove("active");
adminBtn.classList.remove("active");
masterBtn.classList.remove("active");

document.getElementById(r+"Btn")
.classList.add("active");

}


/* PASSWORD */

function eye(){

pass.type=
pass.type=="password"?"text":"password";

}


/* POPUP */

function popup(text,color){

popupBox.style.display="block";

msg.innerHTML="<h2 class='"+color+"'>"+text+"</h2>";

}


function closePop(){

popupBox.style.display="none";

load.style.display="none";

bar.style.width="0%";

}


let popupBox=document.getElementById("popup");


/* LOGIN */

function startLogin(){

load.style.display="block";

bar.style.width="0%";

setTimeout(()=>{

bar.style.width="100%";

},50);

setTimeout(login,2000);

}


/* FIREBASE LOGIN */

async function login(){

let u=user.value;
let p=pass.value;


/* MASTER */

if(role=="master"){

popup("Master Coming Soon","orange");

return;

}


/* LOAD FIREBASE */

const app=await import(
"https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js"
);

const fs=await import(
"https://www.gstatic.com/firebasejs/12.9.0/firebase-firestore.js"
);


const firebaseConfig={

apiKey:"AIzaSyB6iuJiQANc5DIon2ulq8NAtj6SPWT--sY",

authDomain:"printportal-36ae0.firebaseapp.com",

projectId:"printportal-36ae0"

};


const appInit=
app.initializeApp(firebaseConfig);

const db=
fs.getFirestore(appInit);


/* ADMIN */

if(role=="admin"){

const docRef=
fs.doc(db,"admin","login");

const snap=
await fs.getDoc(docRef);

let a=snap.data();

if(a.user==u && a.pass==p){

popup("Login Successful","green");

setTimeout(()=>location="admin.html",1500);

return;

}

}


/* SELLER */

if(role=="seller"){

let ok=false;

const snap=
await fs.getDocs(fs.collection(db,"seller"));

snap.forEach((d)=>{

let s=d.data();

if(s.user==u && s.pass==p && s.active){

ok=true;

localStorage.currentSeller=d.id;

}

});


if(ok){

popup("Login Successful","green");

setTimeout(()=>location="seller.html",1500);

return;

}

}


popup("Login Failed","red");

}

</script>

</body>
</html>
