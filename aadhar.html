<!DOCTYPE html>
<html>

<head>

<title>PRINT PORTAL Aadhaar Editor</title>

<meta name="viewport" content="width=device-width">

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>


<style>

/* SAME YOUR STYLE */

body{
font-family:Arial;
background:#e6e6e6;
text-align:center;
margin:0;
}

.header{
background:#003366;
color:white;
padding:12px;
font-size:22px;
font-weight:bold;
}

.backBtn{
position:absolute;
left:10px;
top:10px;
padding:6px 12px;
background:white;
color:#003366;
border:none;
cursor:pointer;
}

.panel{
background:white;
width:420px;
margin:20px auto;
padding:15px;
border-radius:10px;
box-shadow:0px 0px 15px gray;
}

label{
display:block;
text-align:left;
margin-left:10px;
font-size:13px;
font-weight:bold;
}

input,select,textarea{
width:95%;
padding:7px;
margin:5px;
border:1px solid #aaa;
border-radius:5px;
font-size:14px;
}

textarea{
height:60px;
}

button{
padding:10px 18px;
margin:6px;
background:#003366;
color:white;
border:none;
border-radius:5px;
cursor:pointer;
}

/* CARD */

.card{
width:171.2mm;
height:54mm;
margin:20px auto;
position:relative;
overflow:hidden;
}

.bg{
position:absolute;
width:100%;
height:100%;
}

/* PHOTO */

.photo{
position:absolute;
top:12mm;
left:8.2mm;
width:17.5mm;
height:21mm;
object-fit:cover;
}

/* TEXT */

.hindi{position:absolute;top:12.3mm;left:28.7mm;font-size:4.5pt;}
.english{position:absolute;top:14.6mm;left:28.7mm;font-size:4.5pt;}
.dob{position:absolute;top:17.2mm;left:28.7mm;font-size:4.5pt;}
.gender{position:absolute;top:19.5mm;left:28.7mm;font-size:4.5pt;}

.addrHindi{
position:absolute;
top:12mm;
left:88.8mm;
font-size:4.5pt;
width:35mm;
white-space:pre-line;
}

.addrEnglish{
position:absolute;
top:25mm;
left:88.8mm;
font-size:4.5pt;
width:35mm;
white-space:pre-line;
}

/* NUMBER */

.number{
position:absolute;
top:45mm;
left:27mm;
font-size:11pt;
font-weight:bold;
}

.number2{
position:absolute;
top:45mm;
right:27mm;
font-size:11pt;
font-weight:bold;
}

.qr{
position:absolute;
top:13mm;
right:6mm;
}

</style>

</head>

<body>

<script>

if(localStorage.currentSeller==null){

location="index.html";

}

</script>


<div class="header">

<button class="backBtn"
onclick="location='seller.html'">

â¬… Back

</button>

PRINT PORTAL Aadhaar Editor

</div>


<div class="panel">

<h3>Aadhaar PVC Card Editor</h3>

<label>Photo</label>
<input type="file" id="photo">

<label>Name Hindi</label>
<input id="nameHindi">

<label>Name English</label>
<input id="nameEnglish">

<label>Date of Birth</label>
<input type="date" id="dob">

<label>Gender</label>
<select id="gender">
<option>MALE</option>
<option>FEMALE</option>
</select>

<label>Address Hindi</label>
<textarea id="addrHindi"></textarea>

<label>Address English</label>
<textarea id="addrEnglish"></textarea>

<label>Aadhaar Number</label>
<input id="aadhaar" maxlength="12">

<br>

<button onclick="make()">Generate Card</button>

<button onclick="downloadPDF()">Download HD PDF</button>

</div>



<div id="card" class="card">

<img class="bg"
src="https://upload.wikimedia.org/wikipedia/commons/1/15/Specimen_of_an_Aadhaar_Card_2024.png">

<img id="outPhoto" class="photo">

<div id="outHindi" class="hindi"></div>
<div id="outEnglish" class="english"></div>
<div id="outDob" class="dob"></div>
<div id="outGender" class="gender"></div>

<div id="outAddrHindi" class="addrHindi"></div>
<div id="outAddrEnglish" class="addrEnglish"></div>

<div id="outNumber" class="number"></div>
<div id="outNumber2" class="number2"></div>

<div id="qrcode" class="qr"></div>

</div>


<script type="module">

import { initializeApp }
from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";

import {
getFirestore,
doc,
getDoc,
updateDoc
}
from "https://www.gstatic.com/firebasejs/12.9.0/firebase-firestore.js";


const firebaseConfig={
apiKey:"AIzaSyB6iuJiQANc5DIon2ulq8NAtj6SPWT--sY",
authDomain:"printportal-36ae0.firebaseapp.com",
projectId:"printportal-36ae0"
};

const app=initializeApp(firebaseConfig);
const db=getFirestore(app);


/* GENERATE */

window.make=function(){

outHindi.innerHTML=nameHindi.value;
outEnglish.innerHTML=nameEnglish.value.toUpperCase();
outGender.innerHTML=gender.value;

outAddrHindi.innerHTML=addrHindi.value;
outAddrEnglish.innerHTML=addrEnglish.value;

let d=dob.value;

if(d){

let p=d.split("-");

outDob.innerHTML=p[2]+"/"+p[1]+"/"+p[0];

}

let num=aadhaar.value;

outNumber.innerHTML=num;
outNumber2.innerHTML=num;


let file=photo.files[0];

if(file){

let r=new FileReader();

r.onload=e=>outPhoto.src=e.target.result;

r.readAsDataURL(file);

}

document.getElementById("qrcode").innerHTML="";

new QRCode(qrcode,{

text:nameEnglish.value,

width:100,
height:100

});

}



/* PDF */

window.downloadPDF=async function(){

let name=nameEnglish.value;

html2canvas(card,{scale:6})

.then(async canvas=>{

var pdf=new jspdf.jsPDF('landscape','px',[canvas.width,canvas.height]);

pdf.addImage(canvas.toDataURL(),"PNG",0,0,canvas.width,canvas.height);

pdf.save(name+".pdf");


/* PDF COUNT */

let id=localStorage.currentSeller;

const ref=doc(db,"seller",id);

const snap=await getDoc(ref);

let data=snap.data();

await updateDoc(ref,{

pdf:(data.pdf||0)+1

});

});

}

</script>

</body>
</html>
